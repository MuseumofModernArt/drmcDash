<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>MoMA DRMC dashboard</title>

       <!--

        pseudocode for DRMC dashboard

        pipeline widget (every minute do this)
            open connection to sqlite db
            what is the current unit's UUID?
            what is the current unit's path?
                get the object ID, component number, and component ID
            talk to Archivematica API
                what microservice is it currently on?
            talk to TMS API object endpoint
                what is the title?
                who is the artist?
            talk to TMS API component endpoint
                what is the component name?

-->




    <!-- Bootstrap Core CSS -->
<!--     <link href="css/bootstrap.min.css" rel="stylesheet">
 -->

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- chart js -->
    <script src="../static/js/Chart.js"></script>

    <link href="../static/style.css" rel="stylesheet">
 
    <!-- MetisMenu CSS -->
    <link href="../static/bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../static/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../static/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
 
<body>
    <div id="wrapper">
		<br>

        <div id="page-wrapper">

            <div class="row">
                <div class="col-lg-4">
                    <div class="panel panel-primary">


                        <div class="panel-heading">
                            Pipeline #1
                        </div>
                        <div class="panel-body">
                            <div class="media">
                              <div class="media-left">
                                <a href="#">
                                  <img class="media-object object-fit_fill" src="{{ one_img }}" >
                                </a>
                              </div>
                              <div class="media-body">
                                <table class="table table-striped">
                                    <tr>
                                        <td>Title</td>
                                        <td>{{one_tmsTitle}}</td>
                                    </tr>
                                    <tr>
                                        <td>Component Name</td>
                                        <td>{{one_tmsComponentName}}</td>
                                    </tr>
                                    <tr>
                                        <td>Component Number</td>
                                        <td>{{one_pathCompNum}}</td>
                                    </tr>
                                    <tr>
                                        <td>Archivematica unit type</td>
                                        <td>{{one_amType}}</td>
                                    </tr>
   
                                </table>
                              </div>
                            </div>
                            <h5>{{ one_microPercentage }}% complete ({{one_currentMicro}}) </h5>
                            <div class="progress">
                              <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: {{ one_microPercentage }}%">
                                <span class="sr-only">{{ one_microPercentage }} Complete</span>
                              </div>
                            </div>
                        </div>
                        <div class="panel-footer">
                            storage.museum.moma.org/drmc/collection-materials/ready-for-ingest-bagged
                        </div>
                    </div>
                </div>
                <!-- /.col-lg-4 -->
                <div class="col-lg-4">
                    <div class="panel panel-primary">


                        <div class="panel-heading">
                            Pipeline #2
                        </div>
                        <div class="panel-body">
                            <div class="media">
                              <div class="media-left">
                                <a href="#">
                                  <img class="media-object object-fit_fill" src="{{ two_img }}" >
                                </a>
                              </div>
                              <div class="media-body">
                                <table class="table table-striped">
                                    <tr>
                                        <td>Title</td>
                                        <td>{{two_tmsTitle}}</td>
                                    </tr>
                                    <tr>
                                        <td>Component Name</td>
                                        <td>{{two_tmsComponentName}}</td>
                                    </tr>
                                    <tr>
                                        <td>Component Number</td>
                                        <td>{{two_pathCompNum}}</td>
                                    </tr>
                                    <tr>
                                        <td>Archivematica unit type</td>
                                        <td>{{two_amType}}</td>
                                    </tr>
           
                                </table>
                              </div>
                            </div>
                            <h5>{{ two_microPercentage }}% complete ({{two_currentMicro}}) </h5>
                            <div class="progress">
                              <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: {{ two_microPercentage }}%">
                                <span class="sr-only">{{ two_microPercentage }} Complete</span>
                              </div>
                            </div>
                        </div>
                        <div class="panel-footer">
                            storage.museum.moma.org/drmc/collection-materials/ready-for-ingest-bagged
                        </div>
                    </div>
                </div>
                <!-- /.col-lg-4 -->
                <div class="col-lg-4">
                    <div class="panel panel-primary">


                        <div class="panel-heading">
                            Pipeline #3
                        </div>
                        <div class="panel-body">
                            <div class="media">
                              <div class="media-left frame-round">
                                <div>
                                  <img class="media-object object-fit_fill" src="{{ three_img }}" >
                                </div>
                              </div>
                              <div class="media-body">
                                
                                <table class="table">
                                    <tr>
                                        <td>Title</td>
                                        <td>{{three_tmsTitle}}</td>
                                    </tr>
                                    <tr>
                                        <td>Component Name</td>
                                        <td>{{three_tmsComponentName}}</td>
                                    </tr>
                                    <tr>
                                        <td>Component Number</td>
                                        <td>{{three_pathCompNum}}</td>
                                    </tr>
                                    <tr>
                                        <td>Archivematica unit type</td>
                                        <td>{{three_amType}}</td>
                                    </tr>
                                </table>
                              </div>
                            </div>
                            <h5>{{ three_microPercentage }}% complete ({{three_currentMicro}}) </h5>
                            <div class="progress">
                              <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: {{ three_microPercentage }}%">
                                <span class="sr-only">{{ three_microPercentage }} Complete</span>
                              </div>
                            </div>
                        </div>
                        <div class="panel-footer">
                            storage.museum.moma.org/drmc/collection-materials/ready-for-ingest-bagged
                        </div>
                    </div>
                </div>
                <!-- /.col-lg-4 -->
            </div>
   
            <div class="row">
                <div class="col-lg-6">
                <iframe src="http://archivematica.museum.moma.org/automation-audit/metrics" width="100%" height="500px"></iframe>

                </div>

                                <div class=":col-lg-6">
                <canvas id="myChart" width="800" height="400"></canvas>

                <script type="text/javascript">

                    var data = {
                        labels: {{labels}},
                        datasets: [
                            {
                                label: "Pre-ingest",
                                fillColor: "rgba(220,220,220,0.1)",
                                strokeColor: "rgba(220,220,220,1)",
                                pointColor: "rgba(220,220,220,1)",
                                pointStrokeColor: "#fff",
                                pointHighlightFill: "#fff",
                                pointHighlightStroke: "rgba(220,220,220,1)",
                                data: {{preIngest}}
                            },
                            {
                                label: "Ready For Ingest",
                                fillColor: "rgba(151,187,205,0.1)",
                                strokeColor: "rgba(151,187,205,1)",
                                pointColor: "rgba(151,187,205,1)",
                                pointStrokeColor: "#fff",
                                pointHighlightFill: "#fff",
                                pointHighlightStroke: "rgba(151,187,205,1)",
                                data: {{readyForIngest}}
                            },
                            {
                                label: "Artwork level backlog",
                                fillColor: "rgba(24, 134, 53, 0.48)",
                                strokeColor: "rgba(151,187,205,1)",
                                pointColor: "rgba(151,187,205,1)",
                                pointStrokeColor: "#fff",
                                pointHighlightFill: "#fff",
                                pointHighlightStroke: "rgba(151,187,205,1)",
                                data: {{artworkBacklog}}
                            },
                            // {
                            //     label: "MPA backlog",
                            //     fillColor: "rgba(151,187,205,0.2)",
                            //     strokeColor: "rgba(151,187,205,1)",
                            //     pointColor: "rgba(151,187,205,1)",
                            //     pointStrokeColor: "#fff",
                            //     pointHighlightFill: "#fff",
                            //     pointHighlightStroke: "rgba(151,187,205,1)",
                            //     data: {{mpaBacklog}}
                            // },
                            {
                                label: "Isilon pre-ingest",
                                fillColor: "rgba(151,187,205,0.1)",
                                strokeColor: "rgba(151,187,205,1)",
                                pointColor: "rgba(151,187,205,1)",
                                pointStrokeColor: "#fff",
                                pointHighlightFill: "#fff",
                                pointHighlightStroke: "rgba(151,187,205,1)",
                                data: {{preIngestIsilon}}
                            },
                            {
                                label: "Isilon ready for ingest",
                                fillColor: "rgba(151,187,205,0.2)",
                                strokeColor: "rgba(151,187,205,1)",
                                pointColor: "rgba(151,187,205,1)",
                                pointStrokeColor: "#fff",
                                pointHighlightFill: "#fff",
                                pointHighlightStroke: "rgba(151,187,205,1)",
                                data: {{readyForIngest2}}
                            }
                        ]
                    };

                    // Get the context of the canvas element we want to select
                    var ctx = document.getElementById("myChart").getContext("2d");
                    var myLineChart = new Chart(ctx).Line(data);

                </script>

                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->

            <div class="row">
                <div class="col-md-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Storage stats
                        </div>
                        <div class="panel-body">
                            this is where the current size of the various pre-processing dirs will go                     
                        </div>
                    </div>
                </div>
                <div class="col-md-2">
                    asdf
                </div>
                <div class="col-md-2">
                    asdf
                </div>
                <div class="col-md-2">
                    asdf
                </div>
            </div>
      
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->


    <!-- jQuery -->
    <script src="../static/bower_components/jquery/dist/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../static/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../static/bower_components/metisMenu/dist/metisMenu.min.js"></script>

    <!-- Custom Theme JavaScript --> 
    <script src="../static/js/sb-admin-2.js"></script>
</body>

</html>


 